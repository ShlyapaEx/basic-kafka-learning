# Работа с брокером сообщений Apache Kafka

## Выполняемая работа

- Конфигурация простейших consumer'а и producer'а
- Конфигурация кластера kafka для одновременной работы 2-х брокеров (с использованием Zookeeper и без него)

## Инструкция по запуску

1. Создание и активация виртуального окружения

```bash
python3 -m venv venv
source venv/bin/activate
```

2. Установка зависимостей

```bash
pip install -r requirements.txt
```

3. Запуск контейнеров

- Для запуска Kafka совместно с Zookeeper:

```bash
docker-compose -f kafka-with-zookeeper/docker-compose.yml up
```

- Для запуска Kafka без Zookeeper (в режиме KRaft):

```bash
docker-compose -f kafka-without-zookeeper/docker-compose.yml up
```

4. Запуск продюсера

```bash
python3 src/producer.py
```

5. Запуск консюмера

```bash
python3 src/consumer.py
```

Результат работы кода можно увидеть в консоли. Ожидать можно примерно следующего:

```bash
Принято сообщение: 
 Топик: topic-1
 Раздел: 3
 Оффсет: 384
 Ключ: None
 Значение: Сообщение №951
 Дата и время: 2024-08-24 10:08:44.809000
__________________________________________________
Принято сообщение: 
 Топик: topic-1
 Раздел: 3
 Оффсет: 385
 Ключ: None
 Значение: Сообщение №965
 Дата и время: 2024-08-24 10:08:44.809000
__________________________________________________
Принято сообщение: 
 Топик: topic-1
 Раздел: 3
 Оффсет: 386
 Ключ: None
 Значение: Сообщение №975
 Дата и время: 2024-08-24 10:08:44.809000
__________________________________________________
```